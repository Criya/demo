<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>boostrap demo</title>


    <style>
        .bootstrapBrowser {
            width: 500px;
            height: 281px;
            margin: auto;
            position: relative;
            overflow: hidden;
            
        }

        .bootstrap {
            display: flex;
            align-items: center;
            transition: transform 0.5s; 
        }

        .bootstrapButton {
            margin: auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .bootstrapButton button.active{
            color: blue;
        }
    </style>
</head>

<body>
    <div class="bootstrapBrowser">
        <div class="bootstrap">
            <img src="./img/1.jpg" width="500" alt="">
            <img src="./img/2.jpg" width="500" alt="">
            <img src="./img/3.jpg" width="500" alt="">
        </div>
    </div>
    <div class="bootstrapButton">
        <button id="button1">①</button>
        <button id="button2">②</button>
        <button id="button3">③</button>
    </div>
</body>
<script src="./jquery-3.3.1.min.js"></script>
<script>
    let imgNum = $(".bootstrapBrowser img").length
    let offset = 0
    var currentButtonTarget = 0;
    for (let i=1; i<imgNum+1; i++){
        //临时保存offset值，防止使用循环结束后的offset
        let tmp = offset;   
        $("#button"+i).on("click", (e) => {
            $(".bootstrap").css({transform: "translateX(-" + tmp + "px)"})

            //点击后按钮被激活
            $(e.currentTarget).addClass("active")
            .siblings(".active").removeClass("active")
            currentButtonTarget = i-1; //目前显示的照片，i从1开始
        })
        offset += 500;
        
    }

    let clickIndex = 1 //一开始时显示第二张，所以从第二张开始点击
    
    //默认第一张图片active状态
    $(".bootstrapButton button").eq(0).trigger("click")

    var bootstrapLoopId = bootstrapLoopStart()
    function bootstrapLoopStart() {
        return setInterval(() => {

            //控制只能往前滚一张
            if (clickIndex - currentButtonTarget !== 1) {
                clickIndex = currentButtonTarget + 1;
            }
        
            $(".bootstrapButton button").eq(clickIndex % imgNum).trigger("click");
            clickIndex++;

        }, 2000)
    }

    $(".bootstrapBrowser").mouseenter(()=>{
        window.clearInterval(bootstrapLoopId);
    })
    $(".bootstrap").mouseleave(()=>{
        bootstrapLoopId = bootstrapLoopStart();
    })

    /* $("#button1").on("click", () => $(".bootstrap").css({
        transform: "translateX(0)"
    }))
    $("#button2").on("click", () => $(".bootstrap").css({
        transform: "translateX(-500px)"
    }))
    $("#button3").on("click", () => $(".bootstrap").css({
        transform: "translateX(-1000px)"
    }))

     */
</script>

</html>